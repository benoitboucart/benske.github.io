{"content":"<p>This blog is built with <strong>Jekyll</strong>, a static site generator. That means that raw HTML files are generated and so no database is required like for a WordPress blog. That gives your website a considerable performance boost. </p>\n\n<p>One of the other advantages of using <em>Jekyll</em> is that you can write your posts in your favorite text editor and then push your changes via GIT for deployment.</p>\n\n<p>{% comment %}\n    {% gist 8387126 %} \n{% endcomment %}</p>\n\n<p>Before developping my new blog with Jekyll, I started with the HTML / CSS / Javascript slicing of <a href=\"https://dribbble.com/shots/1527973-Personal-blog-redesign\" title=\"Blog design on Dribbble\">my design</a>. I used <strong>Sass with Compass</strong> in combination with Gulp. </p>\n\n<blockquote>\n  <p>For more information about Gulp and how it works, I recommend <a href=\"http://www.smashingmagazine.com/2014/06/11/building-with-gulp/\" title=\"Article about Gulp JS\">this article</a>.</p>\n</blockquote>\n\n<p>I made different <strong>Gulp tasks</strong>, one for CSS, another for Javascript and finally one for Jekyll and HTML.</p>\n\n<h2 id=\"the-css-task\">The CSS task</h2>\n<p>I used this task for converting the SASS files and minify the generated CSS:</p>\n\n<p>{% highlight javascript linenos %}\ngulp.task(‘compass’, function() {\n    gulp.src(srcStylesheets + ‘*.scss’)\n        .pipe(compass({\n            css     : distStylesheets,\n            sass    : srcStylesheets,\n            image   : distImages,\n            logging : true\n        }))\n            .on(‘error’, function(err) {\n                console.log(err);\n            })\n        .pipe(minifyCSS())\n        .pipe(gulp.dest(distStylesheets))\n        .pipe(browserSync.reload({stream:true}));\n});\n{% endhighlight %}</p>\n\n<p>The last “Gulp pipe” will reload the browser window when the CSS has been generated. The magic behind this is <strong>browserSync</strong>. This plugin will reload <strong>all your devices</strong>, no matter if its a desktop, tablet or smartphone.</p>\n\n<blockquote>\n  <p>BrowserSync makes your workflow faster by synchronising URLs, interactions and code changes across <strong>multiple devices</strong>. It’s wicked-fast and totally free. </p>\n</blockquote>\n\n<p>You can read more about BrowserSync and how to install it <a href=\"http://shakyshane.com/gulpjs-sass-browsersync-ftw/\" title=\"Gulp - Sass - Browsersync ftw\">on the blog of its developer</a>.</p>\n\n<h2 id=\"the-javascript-task\">The Javascript task</h2>\n<p>The Javascript Gulp task is similar to the CSS task:\n{% highlight javascript linenos %}\ngulp.task(‘js’, function () {\n    gulp.src([srcJavascripts + ‘plugins.js’, srcJavascripts + ‘main.js’])\n        .pipe(concat(pkg.name + ‘.js’))\n        .pipe(gulp.dest(distJavascripts))\n        .pipe(rename(pkg.name + ‘.min.js’))\n        .pipe(uglify())\n        .pipe(size())\n        .pipe(gulp.dest(distJavascripts))\n        .pipe(browserSync.reload({stream:true, once: true}));\n});\n{% endhighlight %}</p>\n\n<p>This task will combine &amp; minify all the Javascript files and reload the open browser(s) when a Javascript file changed.</p>\n\n<h2 id=\"the-html--jekyll-task\">The HTML &amp; Jekyll task</h2>\n<p>And now the most interesting part: the HTML &amp; Jekyll tasks. The HTML task will be triggered <strong>after Jekyll’s task</strong> to minify the generated HTML files:</p>\n\n<p>{% highlight javascript linenos %}\ngulp.task(‘html’, [‘jekyll’], function() {\n    gulp.src([path.join(deploy, ‘<em>.html’),path.join(deploy, ‘</em>/<em>/</em>/<em>.html’)]/</em>‘<em>.html’</em>/)\n        .pipe(htmlmin({collapseWhitespace: true}))\n        .pipe(gulp.dest(deploy))\n        .pipe(browserSync.reload({stream:true, once: true}));\n});\n{% endhighlight %}</p>\n\n<p>The <em>“Jekyll”</em> task is based on <a href=\"http://stackoverflow.com/questions/21856861/running-jekyll-as-a-child-process-in-gulp-node\">multiple</a> <a href=\"http://stackoverflow.com/questions/21293999/use-jekyll-with-gulp\">StackOverflow</a> <a href=\"http://stackoverflow.com/questions/23185448/managing-gulp-dependencies-when-spawning-child-processes\">answers</a>. It will run the <code>build</code> command of Jekyll.</p>\n\n<p>{% highlight javascript linenos %}\ngulp.task(‘jekyll’, function (gulpCallBack){\n    var spawn = require(‘child_process’).spawn;\n    var jekyll = spawn(‘jekyll’, [‘build’], {stdio: ‘inherit’});</p>\n\n<pre><code>jekyll.on('exit', function(code) {\n    gulpCallBack(code === 0 ? null : 'ERROR: Jekyll process exited with code: '+code);\n}); }); {% endhighlight %}\n</code></pre>\n\n<h2 id=\"conclusion\">Conclusion</h2>\n<p>Now I can update my blog and see the updates on all my connected devices immediately with one single “gulp” command. No need to worry about SASS compiling or Jekyll builds. Isn’t that easy?</p>\n\n<p>Do you have suggestions on how I could improve those tasks? Your feedback is very welcome in the comment section below!</p>\n"}
